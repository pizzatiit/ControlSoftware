<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="db992007-f1cd-4adf-bd7c-07d1f04aeb26">
	<property name="ireport.zoom" value="0.9090909090909091"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="style1">
		<pen lineWidth="0.5" lineStyle="Double"/>
		<box topPadding="2" leftPadding="2" bottomPadding="2" rightPadding="2">
			<pen lineWidth="0.75"/>
			<topPen lineWidth="0.75"/>
			<leftPen lineWidth="0.75"/>
			<bottomPen lineWidth="0.75"/>
			<rightPen lineWidth="0.75"/>
		</box>
	</style>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Usuario\\Documents\\NetBeansProjects\\ControlSoftware\\src\\main\\resources\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="fi" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="ff" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="idvendedor" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select c.nombre as cliente,f.idfactura as idfactura,c.gira as codgira, g.gira as nombregira, r.id as reciboid, r.fechaingreso as fecharecibo, da.id as idpago, r.nrecibo, d.monto as abono, d.saldoanterior as saldoanterior,
d.nuevosaldo as nuevosaldo, r.monto as totalrecibo,
f.numerofactura, case r.tipo when 2 then 'N.C' when 1 then 'REC' end as tipo, t.descripcion as metodopago,
da.referencia as referencia, b.nombre as banco, da.monto as montopago, max(da.fechadocumento) as fechaefectiva, 
datediff(max(da.fechadocumento),f.fechafactura) as diferencia_de_dias, f.fechafactura as fechafactura
from clientes c 
inner join gira g on g.id_gira = c.gira 
inner join apprecibos r on r.idcliente = c.idcliente 
inner join apprecibosdetalle d on d.idapprecibo = r.id 
inner join apprecibosdatos da on da.idrecibo = r.id 
inner join factura f on f.idfactura = d.idfactura 
inner join tablas t on t.idgrupo = da.tipo and t.grupo='metodos_de_pago' 
inner join banco b on b.idbanco = da.idbanco  
inner join company ci on ci.id_company=r.cia
where r.fechasistema between $P{fi} and $P{ff} and r.idvendedor=$P{idvendedor}
group by g.id_gira, r.id, f.idfactura 
]]>
	</queryString>
	<field name="cliente" class="java.lang.String"/>
	<field name="idfactura" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="codgira" class="java.lang.Integer"/>
	<field name="nombregira" class="java.lang.String"/>
	<field name="reciboid" class="java.lang.Integer"/>
	<field name="fecharecibo" class="java.sql.Date"/>
	<field name="idpago" class="java.lang.Integer"/>
	<field name="nrecibo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="abono" class="java.math.BigDecimal"/>
	<field name="saldoanterior" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nuevosaldo" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="totalrecibo" class="java.math.BigDecimal"/>
	<field name="numerofactura" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tipo" class="java.lang.String"/>
	<field name="metodopago" class="java.lang.String"/>
	<field name="referencia" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="banco" class="java.lang.String"/>
	<field name="montopago" class="java.math.BigDecimal"/>
	<field name="fechaefectiva" class="java.sql.Date"/>
	<field name="diferencia_de_dias" class="java.lang.Integer"/>
	<field name="fechafactura" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="totalrecibo_1" class="java.math.BigDecimal" resetType="None" calculation="Sum">
		<variableExpression><![CDATA[$F{totalrecibo}]]></variableExpression>
	</variable>
	<variable name="abono_1" class="java.math.BigDecimal" resetType="Group" resetGroup="codgira" calculation="Sum">
		<variableExpression><![CDATA[$F{abono}]]></variableExpression>
	</variable>
	<variable name="abono_2" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{abono}]]></variableExpression>
	</variable>
	<group name="codgira">
		<groupExpression><![CDATA[$F{codgira}]]></groupExpression>
		<groupHeader>
			<band height="21">
				<textField>
					<reportElement x="0" y="0" width="228" height="20" uuid="e23955b0-e304-4894-aa2b-56617c2756d8"/>
					<textElement>
						<font isBold="true" isUnderline="true"/>
					</textElement>
					<textFieldExpression><![CDATA["GIRA: "+$F{nombregira}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="22">
				<textField>
					<reportElement style="style1" x="669" y="1" width="83" height="20" uuid="7324c374-7168-423a-b526-70c72dda4144"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression><![CDATA[$V{abono_1}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="style1" x="578" y="1" width="88" height="20" uuid="917005c3-e2f1-4e69-ba2f-6d68e4eb028d"/>
					<textElement textAlignment="Right">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL GIRA:]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="reciboid">
		<groupExpression><![CDATA[$F{reciboid}]]></groupExpression>
		<groupHeader>
			<band height="46">
				<textField>
					<reportElement x="0" y="4" width="140" height="20" uuid="06ef9687-4d0b-4430-8faf-5f8ed5ffcdfa"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["N° "+$F{tipo}+": "+$F{nrecibo}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement x="140" y="4" width="100" height="20" uuid="4d345c40-4bb4-4a31-852e-df72b442a340"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Total: "+$F{totalrecibo}]]></textFieldExpression>
				</textField>
				<textField pattern="dd/MM/yyyy">
					<reportElement x="240" y="4" width="156" height="20" uuid="2523b54d-3b8e-4ee4-b20b-aa7c8bdd396d"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["FECHA "+$F{tipo}+": "+$F{fecharecibo}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="395" y="4" width="216" height="20" uuid="294e4155-33c7-46ab-b62f-f2600ea7c418"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["FECHA EFECTIVA: "+$F{fechaefectiva}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="3" width="752" height="1" uuid="f88f4b63-3b2d-4031-a8d5-f7f00dbb6e42"/>
				</line>
				<staticText>
					<reportElement x="0" y="24" width="88" height="20" uuid="95d67546-dabe-4a19-8073-3a3a1662688b"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[N° FACTURA]]></text>
				</staticText>
				<staticText>
					<reportElement x="100" y="24" width="100" height="20" uuid="f6ae619b-f8f0-41e3-98af-b401e41976f4"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[FECHA FACTURA]]></text>
				</staticText>
				<staticText>
					<reportElement x="200" y="26" width="100" height="20" uuid="4ba414a3-9b70-4a4a-a60d-66140ee1b938"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[SALDO ANTERIOR]]></text>
				</staticText>
				<staticText>
					<reportElement x="300" y="26" width="100" height="20" uuid="5e0cbbce-a739-4e7d-a1e4-1a91cdda7c7e"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[ABONO]]></text>
				</staticText>
				<staticText>
					<reportElement x="400" y="26" width="100" height="20" uuid="c36f12ae-8a5c-4f10-8078-7391bdc3c261"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[NUEVO SALDO]]></text>
				</staticText>
				<staticText>
					<reportElement x="500" y="26" width="111" height="20" uuid="f107b297-2c3b-4b0b-a289-a56cc3369a34"/>
					<textElement textAlignment="Center">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[DIAS PARA COBRAR]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="30">
				<subreport>
					<reportElement isPrintRepeatedValues="false" x="0" y="0" width="752" height="28" printWhenGroupChanges="reciboid" uuid="67593242-a674-446f-9c13-80fcf3bc20a4"/>
					<subreportParameter name="idrecibo">
						<subreportParameterExpression><![CDATA[$F{reciboid}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "reportedecobros1_subreport1.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="94">
			<rectangle radius="10">
				<reportElement x="0" y="1" width="752" height="91" uuid="22103047-c7d5-4167-83a6-5c584bd36c80"/>
			</rectangle>
			<image>
				<reportElement x="669" y="5" width="69" height="43" uuid="ff0e2726-a622-414e-89b9-8a50a4ab1ac2"/>
			</image>
			<rectangle>
				<reportElement x="0" y="49" width="659" height="27" backcolor="#0E1E6C" uuid="f7c1ea44-e51f-4652-b05a-54a7884671c1"/>
				<graphicElement>
					<pen lineWidth="0.0"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement x="10" y="8" width="481" height="40" uuid="f622a164-18ce-4c81-85d5-1ef2863b7ff1"/>
				<textElement>
					<font fontName="Serif" size="23"/>
				</textElement>
				<text><![CDATA[REPORTES DE COBROS VENDEDORES (APP)]]></text>
			</staticText>
			<textField>
				<reportElement x="10" y="52" width="299" height="20" forecolor="#FFFFFF" uuid="71e8e2e2-9c6d-473d-929c-3283aa9e55ce"/>
				<textElement>
					<font fontName="SansSerif" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["patito"]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="88" height="20" isRemoveLineWhenBlank="true" uuid="d2ca4aea-3ce2-464d-ada0-f6b654ec0b77"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{numerofactura}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="200" y="0" width="100" height="20" isRemoveLineWhenBlank="true" uuid="f9778df7-7b26-411a-b18e-475da13bf07a"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{saldoanterior}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="300" y="0" width="100" height="20" isRemoveLineWhenBlank="true" uuid="4091f4ce-8817-45fc-8bb0-76e3f87e362f"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{abono}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="400" y="0" width="100" height="20" isRemoveLineWhenBlank="true" uuid="67c3ffd7-e876-4c44-af96-db4384bd4d28"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{nuevosaldo}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="100" y="0" width="100" height="20" isRemoveLineWhenBlank="true" uuid="d8dcad6c-3953-43de-b768-cd9a9f40de2b"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{fechafactura}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="500" y="0" width="111" height="20" uuid="e142dc8d-f4e6-4ef4-895a-fabf7cd6eba7"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{diferencia_de_dias}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="23" splitType="Stretch">
			<textField>
				<reportElement style="style1" x="669" y="2" width="83" height="20" uuid="c4dbb4c9-d676-4526-875c-0de4d7b326ab"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{abono_2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="style1" x="578" y="2" width="88" height="20" uuid="69339a0c-fdb5-4c43-9daa-88c2f76b9ce0"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL GLOBAL:]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
